// WebComponent: PatreonBox 1.1.0 - Collection of WebComponents by Patryk Rzucidlo [@PTKDev] <support@ptkdev.io>
// https://github.com/ptkdev-components/webcomponent-patreon-box
(function() { class PatreonBox extends HTMLElement{constructor(){super();const t=document.createElement("template");t.innerHTML='<style id="patreon-box-style">#patreon-box *{margin:0;padding:0;line-height:0}#patreon-box .patreon-box-container{background-color:rgba(249,103,83,.9);border-radius:25px;padding:15px;text-align:center;justify-content:center;font-weight:500}#patreon-box .patreon-box-title p{line-height:normal;padding-bottom:10px;color:#052a49}#patreon-box .patreon-box-subtitle p{line-height:normal;padding-top:10px;color:#052a49}#patreon-box .patreon-box-backers li img{border-radius:5%;background-color:#f8f8ff;object-fit:cover;object-position:50% 50%;max-width:300px;max-height:300px;min-width:80px;min-height:80px;margin:2px}#patreon-box .patreon-content ul{list-style-type:none;padding-inline-start:0;width:100%}#patreon-box .patreon-box-backers li{list-style-type:none;display:inline}</style><div id="patreon-box" version="1.1.0">\n\t<div class="patreon-box-container">\n\t\t<div class="patreon-box-title"><p>Thanks to those who support me on Patreon ❤️</p></div>\n\t\t<div class="patreon-box-content">\n\t\t\t<ul class="patreon-box-backers"></ul>\n\t\t</div>\n\t\t<div class="patreon-box-subtitle"><p>Do you want to appear here? Become a backer on Patreon!</p></div>\n\t</div>\n</div>',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.json=null,this.options_default={api:"https://api.ptkdev.io/backers/","items-limit":"100","image-width":"100%","image-height":"100%",grid:"responsive",cache:"enabled","border-spacing":"2px","border-corners":"5","force-square":"yes"},this.options=Object.create(this.options_default)}build_html(){let t=this.json,e=[];for(let o=0;o<t.length;o++)e.push({url:t[o].url,pic:t[o].pic});let o="";for(let t=0;t<e.length&&t<this.options["items-limit"];t++)o+=`<li><a href="${e[t].url}" rel="nofollow external noopener noreferrer" target="_blank" ><img width="${this.options["image-width"]}" height="${this.options["image-height"]}" src="${e[t].pic}" alt="Backer" loading="lazy" /></a></li>`;if(this.shadowRoot.querySelector(".patreon-box-backers").innerHTML=o,""!==this.options.grid&&null!==this.options.grid&&"responsive"!==this.options.grid){let t=this.options.grid.split("x"),e=100/parseInt(t[0]),o=this.shadowRoot.querySelectorAll(".patreon-box-backers img");for(let i=0;i<o.length;i++)o[i].removeAttribute("width"),o[i].style.width=`calc(${e}% - (${this.options["border-spacing"]} * (${parseInt(t[0])} * 2)))`,o[i].style.maxWidth="none",o[i].style.maxHeight="none",o[i].style.borderRadius=this.options["border-corners"]+"%",o[i].style.margin=this.options["border-spacing"],"yes"===this.options["force-square"]&&(o[i].removeAttribute("height"),o[i].style.height=this.shadowRoot.querySelector(".patreon-box-backers img").clientWidth+"px")}else{let t=this.shadowRoot.querySelectorAll(".patreon-box-backers img");for(let e=0;e<t.length;e++)t[e].style.borderRadius=this.options["border-corners"]+"%",t[e].style.margin=this.options["border-spacing"],"yes"===this.options["force-square"]&&(t[e].removeAttribute("height"),t[e].style.maxHeight="none",t[e].style.height=this.shadowRoot.querySelector(".patreon-box-backers img").clientWidth+"px")}}resize(){let t=this.shadowRoot.querySelectorAll(".patreon-box-backers img");for(let e=0;e<t.length;e++)"yes"===this.options["force-square"]&&(t[e].style.height=this.shadowRoot.querySelector(".patreon-box-backers img").clientWidth+"px")}api_fetch(){fetch(this.options.api,{cache:null===this.options.cache||"enabled"===this.options.cache?"force-cache":"default"}).then((function(t){if(200===t.status)return t.json()})).then(function(t){this.json=t,this.build_html(),window.addEventListener("resize",function(t){this.resize(t)}.bind(this))}.bind(this))}static get observedAttributes(){return["api","items-limit","grid","image-width","image-height","border-spacing","border-corners","force-square","cache"]}attributeChangedCallback(t,e,o){if(e!==o)switch(this.options[t]=null===o||""===o?this.options_default[t]:o,t){case"api":this.api_fetch();break;default:null!==this.json&&this.build_html()}}}window.customElements.define("patreon-box",PatreonBox); })();